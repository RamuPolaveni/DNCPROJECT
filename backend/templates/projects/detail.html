{% extends 'base.html' %}

{% block title %}Project - {{ project.title }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">{{ project.title }}</h1>
  {% if user.is_authenticated %}
    <a class="btn btn-outline-primary" href="/projects/{{ project.id }}/apply/">Apply</a>
  {% endif %}
</div>

<p class="text-muted">Category: {{ project.category.name|default:"Uncategorized" }}</p>
<p>{{ project.description }}</p>

{% if applications %}
  <h5 class="mt-4">Applications</h5>
  <ul class="list-group">
    {% for a in applications %}
      <li class="list-group-item">
        <strong>{{ a.applicant.username }}</strong>
        <div class="small text-muted">{{ a.applied_at|date:"M d, H:i" }}</div>
        <div>{{ a.message }}</div>
      </li>
    {% endfor %}
  </ul>
{% endif %}

<h5 class="mt-4">Similar Projects</h5>
<div class="row g-3">
  {% for p in similar_projects %}
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-title"><a href="/projects/{{ p.id }}/" class="text-decoration-none">{{ p.title }}</a></h6>
          <p class="card-text text-muted">{{ p.description|truncatechars:120 }}</p>
        </div>
      </div>
    </div>
  {% empty %}
    <p class="text-muted">No similar projects.</p>
  {% endfor %}
</div>
{% endblock %}


